<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-51916074-1', 'r3pwn.github.io');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>

  <title>r3pwn</title>
  <meta name="description" content="My little blog">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">r3pwn</h1>
    </header>
    <div id="container">
      <p class="tagline">My little blog</p>
      <div id="main" role="main">
<!--    <div class="download-bar">
        <div class="inner">
          {{#show_downloads?}}
          <a href="{{tar_url}}" class="download-button tar"><span>Download</span></a>
          <a href="{{zip_url}}" class="download-button zip"><span>Download</span></a>
          {{/show_downloads?}}
          <a href="{{github_url}}" class="code">View {{project_title}} on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div> -->
        <article class="markdown-body">
          <h3>#DebugAllTheThings - June 24th, 2014</h3>
		  First blog post (woot, woot!). So, recently, I have been interested in apk (android app) modding. Specifically, Google Apps. Being taught by the finest (<a href="http://www.twitter.com/zhuowei">Zhuowei Zhang</a>), I quickly caught on and managed to enable internal debugging menus on the Google Play Store (I didn't work on this one), Google Hangouts (I helped a little), Google Play Music (All me), Google Play Books (All me), and Google Play Newsstand (All me).
		  Some were difficult, others easy, and one of them was so easy that I accidentally stumbled upon it. The interesting thing is that most of the Google Apps check for debugging values to be enabled in gservices.db, which is from the package com.google.android.gsf. Using sqlite3 to edit the database, you can add the valuesrequired to enable the debugging menus. That's all fine and dandy, but one problem remains: How does one find those values?
		  The answer to this is simple: decompilation. You must decompile the app so that you can see most of it's original code and all of its resources decompiled. To do this, I used apktool. After the app was decompiled, I would just run "grep -r debug" from the root of the decompiled application source. This can spit out A LOT of info, so i would usually grep that output for other things, like "grep -r debug | grep enable" or "grep -r debug | string".
		  This would limit my options to test. With Google Play books, though, I had to grep for "testing" because there were no references to any string with "debug". The debugging values for the apps are as follows (I'll explain why Newsstand doesn't have any in a minute):
		  <br><b>finsky.debug_options_enabled</b> set to true (Google Play Store "Debug Settings" can be found right underneath the normal "Settings" Button)
		  <br><b>babel_debugging</b> set to true (Google Hangouts "Debug Settings" can be found in the top right-hand corner)
		  <br><b>music_debug_logs_enabled</b> set to true (Google Play Music "Debug Logging" can be found at the bottom of the standard Settings list)
		  <br><b>books:show_testing_ui</b> set to true (Google Play Books "Testing Settings" can be found in the top right-hand corner)
		  <br>Now, to actually get to enabling those Debug settings. You can do this either via an adb shell or through Terminal Emulator. One thing, though, you do need root access.
		  <br>
		  <br>u0_a78@flo:/ $ su
		  <br>root@flo:/ # cd /data/data/com.google.android.gsf/databases
		  <br>root@flo:/data/data/com.google.android.gsf/databases # sqlite3 gservices.db
		  <br>SQLite Version 3.7.16 2013-03-18 11:39:23 [www.ptsoft.org] [www.ptdave.com]
		  <br>Enter ".help" for instructions
		  <br>Enter SQL statements terminated with a ";"
		  <br>sqlite> insert into overrides (name, value) VALUES ('finsky.debug_options_enabled', 'true');
		  <br>sqlite> 
		  <br>root@flo:/data/data/com.google.android.gsf/databases # reboot
		  <br>
		  <br>That should enable Google Play Store Debug Settings. Feel free to do that with the other values before rebooting. 
		  Now, on to Newsstand. This one doesn't even require root or any values to be changed. Just Open Newsstand, open its Settings Menu, scroll to the bottom where you see the Version Number.
		  Now, I know this may be difficult to some ;), but I need you to spam the crap out of that Version Number button. Ta-da! Debug Settings enabled! 
		  It's not much, but it still is cool to have it enabled. (If you're curious, yes that is the one I found by accident) I am in the process of trying to enable Debugging menus on all the apps, but, as Zhuowei has informed me, all of the apps that use Dogfooding (Google Plus, Youtube, Translate, maybe more) check for a value in the BuildConfig, which we could change by just a simple Xposed module.
		  Sorry to cut it short, but i really don't have anything else to say.
		  <br>Happy hacking!
		  <br> 
		  <br> - r3pwn (Greg Willard)
		  
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="http://github.com/r3pwn" class="avatar"><img src="https://avatars2.githubusercontent.com/u/4053609?u=a9581385f31c718676fe95b9cf1a0294f57b9ca3&s=140" width="48" height="48"/></a>View <a href="http://github.com/r3pwn">r3pwn</a> on <a href="https://www.github.com">GitHub</a></p>

      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br/>theme by <a href="http://twitter.com/jonrohan/">Jon Rohan</a> and hosted by <a href="http://freedns.afraid.org">FreeDNS</a>.</small>
      </div>
    </footer>
  </div>
<!--  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="{{tar_url}}" class="tar">tar</a><a href="{{zip_url}}" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  {{{google_analytics}}} -->
</body>
</html>
